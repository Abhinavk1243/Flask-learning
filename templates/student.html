<!DOCTYPE html>
<html>

<head>
  <title>Students</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700" rel="stylesheet">
  <link rel="canonical" href="https://getbootstrap.com/docs/4.0/examples/sticky-footer/">
  <meta name="description" content="">
  <meta name="author" content="">
  <link rel="icon" href="/docs/4.0/assets/img/favicons/favicon.ico">


  <style>
    /* Style the tab */
  .footer {
  position: fixed;
  bottom: 0;
  width: 100%;
  height: 30px; /* Set the fixed height of the footer here */
  line-height: 60px; /* Vertically center the text there */
  background-color: #f5f5f5;
}

.foot {
  width: auto;
  max-width: 680px;
  padding: 0 15px;
}






    table,
    th,
    td {
      border: 1px solid black;

    }

    th,
    td {
      padding: 15px;
    }


    h1 {
      color: rgba(128, 0, 0, 0.897);
      text-align: center;

      margin-left: 40px;
    }

    #insert_button {
      color: wheat;
    }
  </style>



  <script>



    function delete_student(id) {

      $.ajax
        (
          {
            url: '/student/' + id,
            type: 'DELETE',
            success: function (result) {
              window.location.reload();

            },
            error: function (response) {
              console.log(response)
            }
          }
        );

    };


    function update_form(id, name, age) {
      var name = name;
      var id = Number(id);
      var age = Number(age);
      var obj = { name: name, age: age, id: id };
      var json = JSON.stringify(obj);
      window.location.href = '/student/update_form/' + json;
    }
    function student_form() {
      window.location.href = '/student/submit_form/';

    }

    function student_list() {
      windw.location.reload();
    }

    const search_student_id = () => {
      let filter = document.getElementById("search").value.toUpperCase();
      let student_table = document.getElementById("student_table");
      let tr = student_table.getElementsByTagName('tr');
      let th = student_table.getElementsByTagName('th');


      for (var i = 0; i < tr.length; i++) {
        for (var j = 0; j < th.length; j++) {
          let td = tr[i].getElementsByTagName('td')[j];

          if (td) {
            let textvalue = td.textContent || td.innerHTML;


            if ((textvalue.toUpperCase()).indexOf(filter) > -1) {
              tr[i].style.display = "";
            } else {
              tr[i].style.display = "none";

            }
          }
        }

      }


    }
    function hello() {
      document.write("working");
    }

  </script>



  </script>


</head>
<title>students</title>

<body>

  <nav class="navbar navbar-default">
    <div class="container-fluid">
      <ul class="nav navbar-nav">
        <li class="active"><a href="#" onclick="window.location.reload()">Student list</a></li>
        <li><a href="#" onclick='student_form()'>Student form</a></li>
      </ul>
      <form class="navbar-form navbar-left">
        <div class="input-group">
          <input type="text" class="form-control" placeholder="Search" id="search" name="search"
            onkeyup="search_student_id()">

        </div>
  </nav>


  <h1 style="color:red;"><b><u>Students</u></b></h1>


  <div class="container">
    <table id="student_table" class="table table-striped table-bordered">
      <tr style="color:black;">
        <th>Student ID</th>
        <th>Student Name</th>
        <th>Age</th>
        <th>Delete</th>
        <th>Update</th>
      </tr>
      {% for i in record: %}
      <tr>
        <td>{{i[0]}}</td>
        <td>{{i[1]}}</td>
        <td>{{i[2]}}</td>

        <!--<td><input type="button"   class="btn btn-danger" 
          onclick='delete_student("{{i[0]}}")' value="delete"></td>-->
        <td><button type="button" class="btn btn-danger" data-toggle="modal" data-target="#exampleModal">
            Delete
          </button>

          <!-- Modal -->
          <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
            aria-hidden="true">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel"></h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div id="box" class="modal-body">
                  <p>Do you really want to delete student record of id={{i[0]}} ,if you delete this will permanently
                    deleted</p>

                </div>
                <div class="modal-footer">

                  <button type="button" onclick='delete_student("{{i[0]}}")' class="btn btn-danger">Yes Delete</button>
                  <button type="button" class="btn btn-primary" onclick="window.location.reload()"
                    data-dismiss="modal">Cancel</button>

                </div>
              </div>
            </div>
          </div>
        </td>
        <td><input type="button" class="btn btn-primary" onclick='update_form("{{i[0]}}","{{i[1]}}","{{i[2]}}")'
            value="update"></td>
      </tr>
      {% endfor %}
    </table>
  </div>

  <p id="demo"></p>
  <p></p>


  </div>
  <footer class="footer">
    <div class="foot">
      <span class="text-muted">Place sticky footer content here.</span>
    </div>
  </footer>

</body>


</html>